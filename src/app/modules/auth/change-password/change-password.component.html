<div class="content-wrapper container-xxl p-0">
    <div class="content-body d-flex-content-center">

        <div class="d-flex col-lg-5 align-items-center auth-bg px-2 p-lg-5">
            <div class="col-12 col-sm-8 col-md-6 col-lg-12 px-xl-2 mx-auto">
                <h2 class="card-title font-weight-bold mb-1">Change Your Password </h2>
                <form class="auth-reset-password-form mt-2" [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">
                    <div class="form-group">
                        <div class="d-flex justify-content-between">
                            <label for="reset-password-new">Old Password</label>
                        </div>
                        <div class="input-group input-group-merge form-password-toggle">
                            <input [type]="oldPasswordTextType ? 'text' : 'password'" formControlName="oldPassword"
                                   class="form-control form-control-merge" placeholder="············"
                                   aria-describedby="reset-password-new" tabindex="1" autofocus
                                   [ngClass]="{ 'is-invalid error': submitted && f.oldPassword.errors }"/>
                            <div class="input-group-append">
                                <span class="input-group-text cursor-pointer"><i class="feather font-small-4"
                                                                                 [ngClass]="{ 'icon-eye-off': oldPasswordTextType, 'icon-eye': !oldPasswordTextType }"
                                                                                 (click)="changeFieldType('oldPasswordTextType')"></i></span>
                            </div>
                        </div>
                        <div *ngIf="submitted && f.oldPassword.errors" class="invalid-feedback"
                             [ngClass]="{ 'd-block': submitted && f.oldPassword.errors }">
                            <div *ngIf="f.oldPassword.errors.required">Old Password is required</div>
                        </div>
                    </div>
                    <p class="card-text mb-2" [ngClass]="{ 'is-invalid error': submitted && f.newPassword.errors }">
                        Password must contain 8 digits. Must contain one uppercase letter and
                        one special character.</p>

                    <div class="form-group">
                        <div class="d-flex justify-content-between">
                            <label for="reset-password-new">New Password</label>
                        </div>
                        <div class="input-group input-group-merge form-password-toggle">
                            <input [type]="passwordTextType ? 'text' : 'password'" formControlName="newPassword"
                                   class="form-control form-control-merge" placeholder="············"
                                   aria-describedby="reset-password-new" tabindex="1" autofocus
                                   [ngClass]="{ 'is-invalid error': submitted && f.newPassword.errors }"/>
                            <div class="input-group-append">
                                <span class="input-group-text cursor-pointer"><i class="feather font-small-4"
                                                                                 [ngClass]="{ 'icon-eye-off': passwordTextType,  'icon-eye': !passwordTextType  }"
                                                                                 (click)="changeFieldType('passwordTextType')"></i></span>
                            </div>
                        </div>
                        <div *ngIf="submitted && f.newPassword.errors" class="invalid-feedback"
                             [ngClass]="{ 'd-block': submitted && f.newPassword.errors }">
                            <div *ngIf="f.newPassword.errors.required">Password is required</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="d-flex justify-content-between">
                            <label for="reset-password-confirm">Confirm Password</label>
                        </div>
                        <div class="input-group input-group-merge form-password-toggle">
                            <input [type]="confPasswordTextType ? 'text' : 'password'" formControlName="confirmPassword"
                                   class="form-control form-control-merge" placeholder="···········"
                                   aria-describedby="reset-password-confirm" tabindex="2"
                                   [ngClass]="{ 'is-invalid error': submitted && (f.confirmPassword.errors?.mustMatch  || f.confirmPassword.errors?.required) }"/>
                            <div class="input-group-append">
                                <span class="input-group-text cursor-pointer"><i class="feather font-small-4"
                                                                                 [ngClass]="{  'icon-eye-off': confPasswordTextType, 'icon-eye': !confPasswordTextType }"
                                                                                 (click)="changeFieldType('confPasswordTextType')"></i></span>
                            </div>
                        </div>
                        <div *ngIf="submitted && (f.confirmPassword.errors?.mustMatch  || f.confirmPassword.errors?.required || f.confirmPassword.errors?.mustDifferent )"
                             class="invalid-feedback"
                             [ngClass]="{ 'd-block': submitted && (f.confirmPassword.errors?.mustMatch  || f.confirmPassword.errors?.required|| f.confirmPassword.errors?.mustDifferent) }">
                            <div *ngIf="f.confirmPassword.errors?.required">Confirm Password is required</div>
                            <div *ngIf="f.confirmPassword.errors?.mustMatch">Password does not matched</div>
                            <div *ngIf="f.confirmPassword.errors?.mustDifferent">Cannot use old password as new password. Please choose a different password.</div>
                        </div>
                    </div>

                    <p class="mb-2 is-invalid error">{{error}}</p>

                    <button [disabled]="loading" class="btn btn-primary btn-block" tabindex="3" rippleEffect>
                        <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>Change Password
                    </button>
                </form>
            </div>
        </div>

    </div>
</div>